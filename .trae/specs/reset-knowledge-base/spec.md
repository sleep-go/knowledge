# 重置知识库功能规范

## 为什么 (Why)
用户需要一种方法来清空现有的知识库并重新加载，特别是当他们更改了知识库文件夹路径，或者想要完全刷新索引内容时。目前系统只提供了“同步”功能，缺乏明确的“删除/重置”功能。

## 变更内容 (What Changes)
- 添加一个新的后端接口 `/api/kb/reset`，用于从数据库中删除所有的知识库文件记录和分片数据。
- 在前端设置模态框中添加一个“重置知识库”按钮。
- 更新前端逻辑以处理重置操作，并在重置后刷新文件列表。

## 影响 (Impact)
- **受影响的规范**: 无直接影响，增强了知识库管理能力。
- **受影响的代码**:
    - `internal/server/router.go`: 新增 API 接口。
    - `internal/db/sqlite.go`: 新增清空知识库表的数据库函数。
    - `web/static/index.html`: 设置界面新增按钮。
    - `web/static/script.js`: 触发重置和更新 UI 的逻辑。

## 新增需求 (ADDED Requirements)
### 需求：重置知识库
系统必须提供一个 API 接口来删除 `knowledge_base_files` 和 `knowledge_base_chunks` 表中的所有记录。
前端必须提供一个“重置”按钮，点击后调用此 API 并清空显示的文件列表。

#### 场景：成功案例
- **当** 用户点击“重置知识库”按钮时
- **那么** 所有已索引的文件将从数据库中移除
- **并且** 设置模态框中的文件列表变为空
- **并且** 显示一条成功消息。

## 修改的需求 (MODIFIED Requirements)
### 需求：知识库管理
**旧**: 仅支持同步。
**新**: 支持同步和重置。
